function delectTpl(e,t){var a="/show/static/core/widget/tpl/DetailQuery/close_60a27bc.gif";return"<a href='#' onclick=\"GPW.form.delectForm('"+e+"','"+t+"'); return false;\" ><img src='"+a+"' alt='删除' style='padding-top: 6px;' width='10' height='10' border='0'></a>"}$(window).resize(function(){GPW.layout.mainLayout.setSizes()});var GPC={url:{queryDetailUrl:GLOBAL.S.URL+GLOBAL.P.MODULES+"/a/queryDetailPage/"+GLOBAL.P.CLASSNAME+"?"+GLOBAL.P.parameter},constant:{between:"between"}},GPW={layout:{},tree:{}};GPW.layout={mainLayout:{},queryForm:{},treeLayout:{},init:function(){this.mainLayout=new dhtmlXLayoutObject("layoutObj","2U"),this.treeLayout=this.mainLayout.cells("a"),this.treeLayout.setWidth(180),this.treeLayout.hideHeader(),this.queryForm=this.mainLayout.cells("b"),this.queryForm.hideHeader()}},GPW.tree={mainTree:{},init:function(){this.mainTree=GPW.layout.treeLayout.attachTree(),this.mainTree.setImagePath(GLOBAL.IconsPath+"dhxtree_skyblue/"),this.mainTree.enableTreeImages("false"),this.mainTree.loadJSONObject(GLOBAL.P.P_DETAIL_QUERY_TREE),this.mainTree.openAllItems(0),this.onClick()},onClick:function(){this.mainTree.attachEvent("onClick",function(e){return this.hasChildren(e)||GPW.form.addForm(e),!0})}},GPW.form={mainForm:{},allQueryForm:GLOBAL.P.P_DETAIL_QUERY_ALL,delectForm:function(e,t){this.mainForm.removeItem(t+"Block")},addForm:function(e){var t=e+"Block";this.mainForm.isItem(t)||_.each(this.allQueryForm,function(e){e.name==t&&GPW.form.mainForm.addItem(null,e,0)})},getMainFormData:function(){return GLOBAL.P.P_DETAIL_QUERY_OFTEN},getForm:function(e,t){return e.attachForm(t)},init:function(){var e=this.getMainFormData();this.mainForm=this.getForm(GPW.layout.queryForm,e);var t=this.mainForm;t.attachEvent("onInfo",function(e,t){GLOBAL.PopupFunction(t,this.getUserData(e,"info"))}),t.attachEvent("onButtonClick",function(e){if("query"==e){var a=new Array,n=0;t.forEachItem(function(e){var i=t.getItemType(e);if("input"==i||"combo"==i){var r=e.lastIndexOf("_Operator");if(r>-1){var o=e.substring(0,r),m=t.getItemValue(e),u=t.getItemValue(o);if(!_.isEmpty(u)&&m)a[n]=GLOBAL.getQueryObjct(o,m,u),n++;else if(m&&"between"==m){var l=t.getInput(o+"_Begin").value,s=t.getInput(o+"_End").value;l&&s&&(a[n]=GLOBAL.getBetweenQueryObjct(o,m,l,s),n++)}}}});var i=JSON.stringify(a),r=parent.GPW.cache.grid;r.clearAll(),r.load(GPC.url.queryDetailUrl+"&_json="+encodeURI(i),"js"),parent.GPW.window.handle.unload()}}),t.attachEvent("onChange",function(e,t){var a=e.lastIndexOf("_Operator"),n=GPW.form.mainForm;if(a>-1){var i=e.substring(0,a);"between"==t?(n.showItem(i+"_Begin"),n.showItem(i+"_End"),n.hideItem(i)):(n.hideItem(i+"_Begin"),n.hideItem(i+"_End"),n.showItem(i))}}),t.attachEvent("onValidateError",function(e,a){parent.dhtmlx.message({type:"error",text:"校验错误："+t.getItemLabel(e)+"字段值不能为["+a+"]！"})})}},$(function(){GPW.layout.init(),GPW.tree.init(),GPW.form.init()});