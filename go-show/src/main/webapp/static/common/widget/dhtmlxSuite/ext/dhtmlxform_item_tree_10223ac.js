dhtmlXForm.prototype.items.inputTree={data:{},render:function(t,e){return this.data=e,t._type="inputTree",t._enabled=!0,this.doAddLabel(t,e),this._doAddInput(t,e,"input",null,!0,!0,"dhxform_inputTree"),this},showMenu:function(t,e,n,i,o){var a=$("#"+e+"_Show"),d=$("#"+e+"_Show").offset();$("#"+i).css({left:d.left+"px",top:d.top+a.outerHeight()+"px"}).slideDown("fast"),$("body").bind("mousedown",{than:this,id:e,item:t,inputName:n,contentTree:i,menuBtn:o},this.onBodyDown)},hideMenu:function(t,e,n,i,o){$("#"+i).fadeOut("fast"),$("body").unbind("mousedown",{than:this,id:e,item:t,inputName:n,contentTree:i,menuBtn:o},this.onBodyDown)},onBodyDown:function(t){t.target.id==t.data.menuBtn||t.target.id==t.data.contentTree||$(t.target).parents("#"+t.data.contentTree).length>0||t.data.than.hideMenu(t.data.inputName,t.data.id,t.data.inputName,t.data.contentTree)},setValue:function(t,e){t._value=e},getValue:function(t){return t._value},setInputValue:function(t,e,n){var i=$("input:text[name='"+this.data.name+"_Show']");i.attr("value",e);var o=$("input:hidden[name='"+this.data.name+"']");o.attr("value",n),t._value=n},_doAddInput:function(t,e,n,i,o,a,d){var r=document.createElement("DIV");r.className="dhxform_control",t._ll?t.appendChild(r):t.insertBefore(r,t.firstChild);var s=document.createElement(n);s.className=d,s.name=t._idd+"_Show",s._idd=t._idd+"_Show",s.id=e.uid+"_Show","string"==typeof i&&(s.type=i),("INPUT"==n||"TEXTAREA"==n)&&(s.onkeyup=function(e){e=e||event,t.callEvent("onKeyUp",[this,e,this._idd])},s.onkeydown=function(e){e=e||event,t.callEvent("onKeyDown",[this,e,this._idd])}),r.appendChild(s);var l=document.createElement("input");l.setAttribute("type","hidden"),l.name=t._idd,l._idd=t._idd,l.id=e.uid,r.appendChild(l),e.readonly&&this.setReadonly(t,!0),1==e.hidden&&this.hide(t),1==e.disabled&&this.userDisable(t),o&&(isNaN(e.inputLeft)||(r.style.left=parseInt(e.inputLeft)+"px"),isNaN(e.inputTop)||(r.style.top=parseInt(e.inputTop)+"px"));var u="",p=!1;if(a&&(isNaN(e.inputWidth)||(u+="width:"+(parseInt(e.inputWidth)-25)+"px;",p=!0),isNaN(e.inputHeight)||(u+="height:"+parseInt(e.inputHeight)+"px;")),"string"==typeof e.style&&(u+=e.style),s.style.cssText=u,e.maxLength&&s.setAttribute("maxLength",e.maxLength),e.connector&&s.setAttribute("connector",e.connector),p&&{input:1,password:1,select:1,calendar:1,colorpicker:1}[this.t]){if(null==dhtmlXForm.prototype.items[this.t]._dim){var h=parseInt(s.style.width),m=dhx4.isFF||dhx4.isIE?s.offsetWidth:s.clientWidth;dhtmlXForm.prototype.items[this.t]._dim=m-h}s.style.width=parseInt(s.style.width)-dhtmlXForm.prototype.items[this.t]._dim+"px"}if("object"==typeof e.note){var c=document.createElement("DIV");c.className="dhxform_note",c.style.width=(isNaN(e.note.width)?s.offsetWidth:parseInt(e.note.width))+"px",c._w=e.note.width,c.innerHTML=e.note.text,r.appendChild(c),c=null}var f=e.name+"_UL_inputTree",y=e.name+"_ContentTree",_=document.createElement("DIV");_.setAttribute("id",y),_.setAttribute("style","display:none; position: absolute;z-index:999;");var b=document.createElement("DIV");b.setAttribute("style","background: none repeat scroll 0 0 #fff;  border: 1px solid #a4bed4; height: 120px; overflow-x: auto; overflow-y: scroll;width: 230px;"),b.setAttribute("id",f),_.appendChild(b);var g=document.body.firstChild;document.body.insertBefore(_,g);var w=new dhtmlXTreeObject(f,"100%","100%",0);if(w.setImagePath(e.iconPath+"/js/dhtmlxSuite/imgs/dhxtree_skyblue/"),w.enableTreeImages("false"),w.setXMLAutoLoading(e.url),w.setDataMode("json"),w.loadJSON(e.url),w.attachEvent("onClick",function(n){dhtmlXForm.prototype.items.inputTree.setInputValue(t,w.getItemText(n),n),dhtmlXForm.prototype.items.inputTree.hideMenu(e.name,e.uid,e.name,y,v),t._value=n}),"string"==typeof e.form){var v=e.name+"_TreeBtn",x='"'+e.form+".showMenu('"+e.name+"','"+e.uid+"','"+e.name+"','"+y+"','"+v+"');return false;\"",T=document.createElement("DIV");T.className="dhxform_note",T.setAttribute("style","width:20px; float:right;"),T.innerHTML="&nbsp;<a id='"+v+"' href='#' onclick="+x+"><img src='"+e.iconPath+"/images/contentDrop.gif'  style='margin-top: 3px;'/></a>",r.appendChild(T)}},enable:function(t){t._enabled=!0,String(t.className).search("disabled")>=0&&(t.className=String(t.className).replace(/disabled/gi,"")),t.callEvent("onEnable",[t._idd])},disable:function(t){t._enabled=!1,String(t.className).search("disabled")<0&&(t.className+=" disabled"),t.callEvent("onDisable",[t._idd])}},dhtmlXForm.prototype.showMenu=function(t,e,n,i,o){return this.doWithItem(t,"showMenu",e,n,i,o)},dhtmlXForm.prototype.hideMenu=function(t,e,n,i,o){return this.doWithItem(t,"hideMenu",e,n,i,o)},dhtmlXForm.prototype.getFormData_inputTree=function(t){return this.doWithItem(t,"getValue")},dhtmlXForm.prototype.setFormData_inputTree=function(t,e){return this.doWithItem(t,"setValue",e)},dhtmlXForm.prototype.setValue_inputTree=function(t,e,n){return e?this.doWithItem(t,"setInputValue",n,e):void 0},function(){for(var t in dhtmlXForm.prototype.items.input)dhtmlXForm.prototype.items.inputTree[t]||(dhtmlXForm.prototype.items.inputTree[t]=dhtmlXForm.prototype.items.input[t])}();